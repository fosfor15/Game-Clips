
<section class="container mx-auto my-8 bg-secondary p-6">
    <div class="rounded relative flex flex-col">
        <h2 class="font-bold mb-6">
            Upload Video
        </h2>

        <app-alert
            *ngIf="isAlertVisible"
            [bg-color]="alertColor"
        >
            <p>{{ alertMessage }}</p>
            <p *ngIf="showProgress">{{ progress | percent }}</p>
        </app-alert>

        <!-- Upload Dropbox -->
        <div
            *ngIf="!fileSelected"
            app-event-blocker
            class="w-full px-10 py-40 rounded text-center cursor-pointer border border-dashed border-gray-400 transition duration-500 hover:bg-indigo-400 hover:border-indigo-400 hover:border-solid text-xl hover:text-white"
            [ngClass]="{ 'bg-indigo-400 border-indigo-400 border-solid': isDragover }"
            (dragend)="isDragover = false"
            (dragover)="isDragover = true"
            (dragenter)="isDragover = true"
            (dragleave)="isDragover = false"
            (mouseleave)="isDragover = false"
            (drop)="storeFile($event)"
        >
            <h5>Drop your file here (mp4 only!)</h5>
        </div>

        <!-- Form -->
        <form
            *ngIf="fileSelected"
            [formGroup]="uploadForm"
            (ngSubmit)="uploadFile()"
        >
            <!-- Screenshots -->
            <h2 class="my-4 text-xl">Select a Thumbnail</h2>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                <div class="border-8 cursor-pointer border-green-400">
                    <img src="assets/img/1.jpg" />
                </div>
                <div class="border-8 cursor-pointer border-transparent">
                    <img src="assets/img/2.jpg" />
                </div>
                <div class="border-8 cursor-pointer border-transparent">
                    <img src="assets/img/3.jpg" />
                </div>
            </div>

            <!-- Title -->
            <div class="mt-4">
                <label class="block text-xl mb-4">Title</label>
                <app-input
                    [control]="titleControl"
                    placeholder="Name of the video"
                />
            </div>

            <div class="mt-4 text-right select-none">
                <button
                    type="submit"
                    class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none disabled:bg-gray-500"
                    [disabled]="uploadForm.invalid || inSubmit"
                >
                    Publish
                </button>
            </div>
        </form>
    </div>
</section>
